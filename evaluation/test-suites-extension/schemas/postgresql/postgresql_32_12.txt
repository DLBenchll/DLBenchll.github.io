DROP TABLE IF EXISTS t1;
CREATE TABLE t1 (y INT NOT NULL DEFAULT 0, i INT NOT NULL DEFAULT 0, c VARCHAR(20) NOT NULL DEFAULT '');
UPDATE t1 SET i = CASE WHEN c ~ '^[0-9]+$' THEN c::INT ELSE NULL END;
UPDATE t1 SET y = CASE WHEN c ~ '^[0-9]+$' THEN c::INT ELSE NULL END;
UPDATE t1 SET y = i;
INSERT INTO t1 (y) VALUES (0), (CAST('00' AS INT)), (CAST('0000' AS INT));
TRUNCATE t1;
INSERT INTO t1 (i) VALUES (-1), (1800), (2156), (2147483647);
UPDATE t1 SET y = i;
TRUNCATE t1;
INSERT INTO t1 (c) VALUES ('0'), ('0'), ('2012'), ('0');
UPDATE t1 SET y = COALESCE(c::INT, 0);
